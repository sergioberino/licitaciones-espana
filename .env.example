# =============================================================================
# Licitaciones España — Environment variables (example)
# =============================================================================
# Copy this file to .env and set values as needed:
#   cp .env.example .env
#
# Docker Compose loads .env when env_file: - .env is set in docker-compose.yml.
# Compose requires the file to exist; copy .env.example to .env before first run.
# On host, export variables or source .env before running scripts.
# Do not commit .env if it contains secrets; .env is in .gitignore.
# =============================================================================

# -----------------------------------------------------------------------------
# Staging / temporary paths (P1)
# All extraction scripts write under a single tmp base. This dir is disposable
# and can be cleared after successful load to DB (Phase 3 cleanup).
# -----------------------------------------------------------------------------

# Base directory for temporary/staging output.
# - nacional/licitaciones.py uses: {LICITACIONES_TMP_DIR}/raw (downloads),
#   {LICITACIONES_TMP_DIR}/output (CSV + Parquet).
# - CCAA scripts (catalunya, valencia) use: {LICITACIONES_TMP_DIR}/catalunya_datos_completos,
#   {LICITACIONES_TMP_DIR}/valencia_datos, {LICITACIONES_TMP_DIR}/catalunya_parquet,
#   {LICITACIONES_TMP_DIR}/valencia_parquet (or equivalent subdirs).
# Default on host: repo-relative ./tmp. In Docker the Dockerfile sets /app/tmp;
# override here only if you use a different path.
LICITACIONES_TMP_DIR=/app/tmp

# Optional: override nacional script dirs directly (instead of deriving from
# LICITACIONES_TMP_DIR). Uncomment and set if you need separate paths for
# downloads vs output.
# LICITACIONES_DATA_DIR=/app/tmp/raw
# LICITACIONES_OUTPUT_DIR=/app/tmp/output

# -----------------------------------------------------------------------------
# PostgreSQL (Phase 3 — ETL / bulk insertion)
# -----------------------------------------------------------------------------
# On host or single-container: use DB_HOST=localhost (or your Postgres host).
# When this ETL is run by the orchestrator compose, DB_HOST is set to the
# postgres service name by the orchestrator. See docs/network-and-ports.md.
DB_HOST=localhost
DB_PORT=5432
DB_NAME=licitaciones
DB_USER=postgres
DB_PASSWORD=password

# -----------------------------------------------------------------------------
# Embedding service (for generate_embedding: CPV router index)
# -----------------------------------------------------------------------------
# Base URL for the embedding API (used by licitia-etl generate_embedding).
# When run by the orchestrator, this points to the embedding service (e.g. embedding:8000).
EMBEDDING_SERVICE_URL=http://embedding:8000

# Batch sizes for generate_embedding (env-only; suitable for scheduled/orchestrated runs).
# EMBED_BATCH_SIZE: number of texts sent per batch to the embedding service.
#   Default 256 is a reasonable value for multilingual-e5-large in production (throughput vs memory).
# INGEST_BATCH_SIZE: number of rows per bulk INSERT into Postgres (dim.cpv_router).
#   Default 10000 balances transaction size and round-trips.
EMBED_BATCH_SIZE=256
INGEST_BATCH_SIZE=10000