# =============================================================================
# Licitaciones España — Environment variables (example)
# =============================================================================
# Copy this file to .env and set values as needed:
#   cp .env.example .env
#
# When run in a container, the runtime may load this via env_file. On host, export or source .env.
# Do not commit .env if it contains secrets; .env is in .gitignore.
# =============================================================================

# -----------------------------------------------------------------------------
# Staging / temporary paths (P1)
# All extraction scripts write under a single tmp base. This dir is disposable
# and can be cleared after successful load to DB (Phase 3 cleanup).
# -----------------------------------------------------------------------------

# Base directory for temporary/staging output.
# - nacional/licitaciones.py uses: {LICITACIONES_TMP_DIR}/raw (downloads),
#   {LICITACIONES_TMP_DIR}/output (CSV + Parquet).
# - CCAA scripts (catalunya, valencia) use: {LICITACIONES_TMP_DIR}/catalunya_datos_completos,
#   {LICITACIONES_TMP_DIR}/valencia_datos, {LICITACIONES_TMP_DIR}/catalunya_parquet,
#   {LICITACIONES_TMP_DIR}/valencia_parquet (or equivalent subdirs).
# Default on host: repo-relative ./tmp. In Docker the Dockerfile sets /app/tmp;
# override here only if you use a different path.
LICITACIONES_TMP_DIR=/app/tmp

# Optional: override nacional script dirs directly (instead of deriving from
# LICITACIONES_TMP_DIR). Uncomment and set if you need separate paths for
# downloads vs output.
# LICITACIONES_DATA_DIR=/app/tmp/raw
# LICITACIONES_OUTPUT_DIR=/app/tmp/output

# -----------------------------------------------------------------------------
# PostgreSQL (Phase 3 — ETL / bulk insertion)
# -----------------------------------------------------------------------------
# Postgres host. Use localhost (or your DB host) when run standalone; use the DB service hostname when on a shared network.
DB_HOST=localhost
DB_PORT=5432
DB_NAME=licitaciones
DB_USER=postgres
DB_PASSWORD=password

# -----------------------------------------------------------------------------
# Embedding service (for generate_embedding: CPV router index)
# -----------------------------------------------------------------------------
# Base URL for the embedding API (used by generate_embedding). Standalone: e.g. http://localhost:8000. On a shared network: use the embedding service hostname and port.
EMBEDDING_SERVICE_URL=http://localhost:8000

# Batch sizes for generate_embedding (env-only; suitable for scheduled runs).
# EMBED_BATCH_SIZE: number of texts sent per batch to the embedding service.
#   Default 256 is a reasonable value for multilingual-e5-large in production (throughput vs memory).
# INGEST_BATCH_SIZE: number of rows per bulk INSERT into Postgres (dim.cpv_router).
#   Default 10000 balances transaction size and round-trips.
EMBED_BATCH_SIZE=256
INGEST_BATCH_SIZE=10000

# Max concurrent embedding requests per batch (hardware-dependent). 1 = sequential; use 8 or more only if you have enough compute.
EMBED_MAX_WORKERS=1